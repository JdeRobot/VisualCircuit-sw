{"editor":{"id":"a5c93ef7-9cae-41be-9846-7bed1337d795","offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"7b514c32-ff20-47fc-8c9c-579b36d08bcd","type":"diagram-links","isSvg":true,"transformed":true,"models":{"5bf051a5-59db-4bfc-9bc8-d8a776d2a624":{"id":"5bf051a5-59db-4bfc-9bc8-d8a776d2a624","type":"default","selected":false,"source":"0001-5e4a8d88-f3ff-432f-ac26-b5dc1e24fadf","sourcePort":"bbb44acd-b298-462e-b881-1a34fc86830c","target":"05faca20-77c3-4bb6-8a6a-c827aa222af2","targetPort":"216ed536-f82f-40c1-9b51-8c9235840550","points":[{"id":"71de9b95-cdcf-4aa2-aa56-cf30996b771e","type":"point","x":562,"y":120.69999694824219},{"id":"1a3a9908-e6c9-4a6d-9509-d57720979e86","type":"point","x":490.125,"y":206.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"7f4a7dac-75ea-4a72-afec-3768fbe68029":{"id":"7f4a7dac-75ea-4a72-afec-3768fbe68029","type":"default","selected":false,"source":"0002-f07702a6-0709-4326-b6ac-8aa054502ca4","sourcePort":"6111a363-79c6-4d91-8267-5ced91f294a2","target":"05faca20-77c3-4bb6-8a6a-c827aa222af2","targetPort":"26b6fd36-380b-42bf-ad86-8a827b7109be","points":[{"id":"65697051-251d-4058-9be7-803b16a1850e","type":"point","x":701,"y":119.69999694824219},{"id":"eeeec6d4-bb3f-4631-8430-745853768418","type":"point","x":693.75,"y":206.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"e15ea063-7891-425a-9ab6-4029cfca8cd1":{"id":"e15ea063-7891-425a-9ab6-4029cfca8cd1","type":"default","selected":false,"source":"0003-a378a01c-79b9-4818-8534-d329ad60b5c8","sourcePort":"d53fbdf5-94d1-4258-9bd3-6c62ca925cbf","target":"05faca20-77c3-4bb6-8a6a-c827aa222af2","targetPort":"9a683d7c-02e9-4447-bced-46cee2d50571","points":[{"id":"5ddd7e52-582b-42e3-98d6-a687a5d358b8","type":"point","x":842,"y":118.69999694824219},{"id":"24c0c6af-dbdc-4c1c-8b74-7ab630da072b","type":"point","x":881.8875122070312,"y":206.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"2398e939-5ccb-4f98-bc3c-628fc6ee78d9":{"id":"2398e939-5ccb-4f98-bc3c-628fc6ee78d9","type":"default","selected":false,"source":"0004-1b9f8bfc-528f-41b3-9095-f3683e1804a2","sourcePort":"b828157e-daaa-4f53-b3ac-eed80173852a","target":"05faca20-77c3-4bb6-8a6a-c827aa222af2","targetPort":"e7846f16-72f1-4bbb-8f6a-0024d4a99e4f","points":[{"id":"c7c9f599-24bb-48a3-8d03-6a289438a316","type":"point","x":980,"y":117.69999694824219},{"id":"68d61a5d-bd43-4142-9a63-e4d0edbee3ac","type":"point","x":1070.0250244140625,"y":206.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"8b56d9f2-b316-489d-bd66-13cee88bd889":{"id":"8b56d9f2-b316-489d-bd66-13cee88bd889","type":"default","selected":false,"source":"78796547-0b83-48fc-b719-cbf394907dc1","sourcePort":"0251c6f0-6def-4b95-8935-692657db9393","target":"05faca20-77c3-4bb6-8a6a-c827aa222af2","targetPort":"0e2bc95e-9d48-4284-ad71-ba63dcb07da5","points":[{"id":"158e9e91-fbd1-4dc2-84c0-4823c81c8266","type":"point","x":226.5,"y":348.6000061035156},{"id":"9ad5f4a4-3c96-4cff-b4cc-4b67d60fcad2","type":"point","x":301.5,"y":344.1625061035156}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"403d4f8b-2a1e-407b-84bd-9bcd455ebcd4":{"id":"403d4f8b-2a1e-407b-84bd-9bcd455ebcd4","type":"default","selected":false,"source":"b4fbd756-2c48-4f10-9341-a7498ffd8807","sourcePort":"1e0b1554-c640-41c2-83eb-13935aa424e9","target":"05faca20-77c3-4bb6-8a6a-c827aa222af2","targetPort":"007fd589-1945-4b8d-b44e-ae346f993f04","points":[{"id":"f73557ee-6dd5-43ff-bf6f-776413cddb8e","type":"point","x":236.5,"y":495.60003662109375},{"id":"0d518b6d-b48c-496c-b99d-1c7d7bf12951","type":"point","x":301.5,"y":481.82501220703125}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"53e44706-ec08-4705-be57-6cd81b52ee14":{"id":"53e44706-ec08-4705-be57-6cd81b52ee14","type":"default","selected":false,"source":"05faca20-77c3-4bb6-8a6a-c827aa222af2","sourcePort":"bee4a169-71e1-4f15-8c81-f487bed38968","target":"2467bd46-3a99-4709-8276-b24847a76f07","targetPort":"c5687809-3689-4040-8fab-8a83d2dd8cca","points":[{"id":"67e30655-655e-4c21-bc8c-6b635e6e98eb","type":"point","x":1243.1624755859375,"y":413},{"id":"04904867-f213-4a14-ab48-4f06d58ca430","type":"point","x":1336.5,"y":411.6000061035156}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"6ac35df0-6fa1-4daf-860b-6dd1570680e1","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"0001-5e4a8d88-f3ff-432f-ac26-b5dc1e24fadf":{"id":"0001-5e4a8d88-f3ff-432f-ac26-b5dc1e24fadf","type":"basic.constant","selected":false,"x":501,"y":5,"ports":[{"id":"bbb44acd-b298-462e-b881-1a34fc86830c","type":"port.output","x":554.5,"y":113.19999694824219,"name":"constant-out","alignment":"bottom","parentNode":"0001-5e4a8d88-f3ff-432f-ac26-b5dc1e24fadf","links":["5bf051a5-59db-4bfc-9bc8-d8a776d2a624"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Frequency","value":"30.0","local":true}},"0002-f07702a6-0709-4326-b6ac-8aa054502ca4":{"id":"0002-f07702a6-0709-4326-b6ac-8aa054502ca4","type":"basic.constant","selected":false,"x":640,"y":4,"ports":[{"id":"6111a363-79c6-4d91-8267-5ced91f294a2","type":"port.output","x":693.5,"y":112.19999694824219,"name":"constant-out","alignment":"bottom","parentNode":"0002-f07702a6-0709-4326-b6ac-8aa054502ca4","links":["7f4a7dac-75ea-4a72-afec-3768fbe68029"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Kp","value":"1.0","local":true}},"0003-a378a01c-79b9-4818-8534-d329ad60b5c8":{"id":"0003-a378a01c-79b9-4818-8534-d329ad60b5c8","type":"basic.constant","selected":false,"x":781,"y":3,"ports":[{"id":"d53fbdf5-94d1-4258-9bd3-6c62ca925cbf","type":"port.output","x":834.5,"y":111.19999694824219,"name":"constant-out","alignment":"bottom","parentNode":"0003-a378a01c-79b9-4818-8534-d329ad60b5c8","links":["e15ea063-7891-425a-9ab6-4029cfca8cd1"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Ki","value":"1.0","local":true}},"0004-1b9f8bfc-528f-41b3-9095-f3683e1804a2":{"id":"0004-1b9f8bfc-528f-41b3-9095-f3683e1804a2","type":"basic.constant","selected":false,"x":919,"y":2,"ports":[{"id":"b828157e-daaa-4f53-b3ac-eed80173852a","type":"port.output","x":972.5,"y":110.19999694824219,"name":"constant-out","alignment":"bottom","parentNode":"0004-1b9f8bfc-528f-41b3-9095-f3683e1804a2","links":["2398e939-5ccb-4f98-bc3c-628fc6ee78d9"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Kd","value":"1.0","local":true}},"05faca20-77c3-4bb6-8a6a-c827aa222af2":{"id":"05faca20-77c3-4bb6-8a6a-c827aa222af2","type":"basic.code","selected":false,"x":293,"y":198,"ports":[{"id":"0e2bc95e-9d48-4284-ad71-ba63dcb07da5","type":"port.input","x":294,"y":336.6625061035156,"name":"Inp","alignment":"left","parentNode":"05faca20-77c3-4bb6-8a6a-c827aa222af2","links":["8b56d9f2-b316-489d-bd66-13cee88bd889"],"in":true,"label":"Inp","hideLabel":false},{"id":"007fd589-1945-4b8d-b44e-ae346f993f04","type":"port.input","x":294,"y":474.32501220703125,"name":"E","alignment":"left","parentNode":"05faca20-77c3-4bb6-8a6a-c827aa222af2","links":["403d4f8b-2a1e-407b-84bd-9bcd455ebcd4"],"in":true,"label":"E","hideLabel":false},{"id":"bee4a169-71e1-4f15-8c81-f487bed38968","type":"port.output","x":1235.6624755859375,"y":405.5,"name":"Out","alignment":"right","parentNode":"05faca20-77c3-4bb6-8a6a-c827aa222af2","links":["53e44706-ec08-4705-be57-6cd81b52ee14"],"in":false,"label":"Out","hideLabel":false},{"id":"216ed536-f82f-40c1-9b51-8c9235840550","type":"port.parameter","x":482.625,"y":199,"name":"Frequency","alignment":"top","parentNode":"05faca20-77c3-4bb6-8a6a-c827aa222af2","links":["5bf051a5-59db-4bfc-9bc8-d8a776d2a624"],"in":true,"label":"Frequency","hideLabel":false},{"id":"26b6fd36-380b-42bf-ad86-8a827b7109be","type":"port.parameter","x":686.25,"y":199,"name":"Kp","alignment":"top","parentNode":"05faca20-77c3-4bb6-8a6a-c827aa222af2","links":["7f4a7dac-75ea-4a72-afec-3768fbe68029"],"in":true,"label":"Kp","hideLabel":false},{"id":"9a683d7c-02e9-4447-bced-46cee2d50571","type":"port.parameter","x":874.3875122070312,"y":199,"name":"Ki","alignment":"top","parentNode":"05faca20-77c3-4bb6-8a6a-c827aa222af2","links":["e15ea063-7891-425a-9ab6-4029cfca8cd1"],"in":true,"label":"Ki","hideLabel":false},{"id":"e7846f16-72f1-4bbb-8f6a-0024d4a99e4f","type":"port.parameter","x":1062.5250244140625,"y":199,"name":"Kd","alignment":"top","parentNode":"05faca20-77c3-4bb6-8a6a-c827aa222af2","links":["2398e939-5ccb-4f98-bc3c-628fc6ee78d9"],"in":true,"label":"Kd","hideLabel":false}],"data":{"code":"import numpy as np\nimport math\nfrom time import sleep\nfrom utils.wires.wire_str import read_string, share_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_string(input_wires[0])\n    output_0 = share_string(output_wires[0])\n\n    kp = float(parameters[1])\n    ki = float(parameters[2])\n    kd = float(parameters[3])\n    previousError, I = 0, 0\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n\n                msg = input_0.get()\n                \n                if msg is not None and msg[0] is not None:\n                \n                    error = float(msg[0])\n                    sleep(0.01)\n                    \n                    # PID Control Logic\n                    \n                    P = error\n                    I = I + error\n                    D = error-previousError\n                    PIDvalue = (kp*P) + (ki*I) + (kd*D)\n                    previousError = error\n            \n                    linear_velocity = 5.0\n            \n                    angular_velocity = -PIDvalue\n                    \n                    data = []\n                    data.extend((str(linear_velocity), str(angular_velocity)))\n                    to_write = np.array(data, dtype='<U6')\n                    output_0.add(to_write)\n                    control_data[0] += 1\n                    \n            sleep(control_data[1])\n\n    except KeyboardInterrupt:\n    \n        input_0.release()\n        output_0.release()\n        enable_wire.release()","params":[{"name":"Frequency"},{"name":"Kp"},{"name":"Ki"},{"name":"Kd"}],"ports":{"in":[{"name":"Inp"},{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"900px","height":"370px"}}},"78796547-0b83-48fc-b719-cbf394907dc1":{"id":"78796547-0b83-48fc-b719-cbf394907dc1","type":"basic.input","selected":false,"x":133,"y":322,"ports":[{"id":"0251c6f0-6def-4b95-8935-692657db9393","type":"port.output","x":219,"y":341.1000061035156,"name":"input-out","alignment":"right","parentNode":"78796547-0b83-48fc-b719-cbf394907dc1","links":["8b56d9f2-b316-489d-bd66-13cee88bd889"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"Inp"}},"b4fbd756-2c48-4f10-9341-a7498ffd8807":{"id":"b4fbd756-2c48-4f10-9341-a7498ffd8807","type":"basic.input","selected":false,"x":143,"y":469,"ports":[{"id":"1e0b1554-c640-41c2-83eb-13935aa424e9","type":"port.output","x":229,"y":488.10003662109375,"name":"input-out","alignment":"right","parentNode":"b4fbd756-2c48-4f10-9341-a7498ffd8807","links":["403d4f8b-2a1e-407b-84bd-9bcd455ebcd4"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"E"}},"2467bd46-3a99-4709-8276-b24847a76f07":{"id":"2467bd46-3a99-4709-8276-b24847a76f07","type":"basic.output","selected":false,"x":1328,"y":385,"ports":[{"id":"c5687809-3689-4040-8fab-8a83d2dd8cca","type":"port.input","x":1329,"y":404.1000061035156,"name":"output-in","alignment":"left","parentNode":"2467bd46-3a99-4709-8276-b24847a76f07","links":["53e44706-ec08-4705-be57-6cd81b52ee14"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}}}}]},"version":"3.0","package":{"name":"PID","version":"1.0.0","description":"Navigation using PID","author":"Muhammad Taha Suhail","image":"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNjQgNjQiIGhlaWdodD0iNTEyIiB2aWV3Qm94PSIwIDAgNjQgNjQiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PGc+PGc+PHBhdGggZD0ibTI1LjQyIDYyaC0yMS40MnYtOC4yOWMwLTIuOTUgMS4yLTUuNjMgMy4xNC03LjU3Ljg0LS44NCAxLjgyLTEuNTQgMi45LTIuMDYgMS40MS0uNjkgMy0xLjA4IDQuNjctMS4wOC40NCAwIC44Ny4wMyAxLjI5LjA4IDIuODIuMzQgNS4zNCAxLjc4IDcuMDUgMy45MiAxLjE4IDEuNDYgMS45OCAzLjIzIDIuMjYgNS4ybC42OSA0LjguMDMuMDggNC44MS0yLjE5IDEuOTggNC40Ni00LjM4IDJjLS45NS40My0xLjk4LjY1LTMuMDIuNjV6IiBmaWxsPSIjZmNkNzcwIi8+PC9nPjxnPjxwYXRoIGQ9Im0zNy40MiA1Ni45OWMuNTUtMS4xNS41OC0xLjM1LjU4LTEuNTYgMC0xLjM0LTEuMDktMi40My0yLjQzLTIuNDNoLS4wNGMtLjM1IDAtLjY5LjA3LTEuMDEuMjJsLTEuMi41NGMxLjA0LTEuNzEgMi45MS0yLjc2IDQuOTItMi43NmgxLjc2Yy43MyAwIDEuNDEuMiAyIC41NC4zLjE3LjU4LjM5LjgzLjYzLjcyLjczIDEuMTcgMS43MyAxLjE3IDIuODNzLS45IDItMiAyaC00LjU3eiIgZmlsbD0iI2I0ZGQ3ZiIvPjwvZz48Zz48cGF0aCBkPSJtMzMuMzIgNTMuNzYtLjAxLjAxLTEuMzEuNTl2LTcuMzZoMTB2NC41NGMtLjU5LS4zNC0xLjI3LS41NC0yLS41NGgtMS43NmMtMi4wMSAwLTMuODggMS4wNS00LjkyIDIuNzZ6IiBmaWxsPSIjYWFiMmJkIi8+PC9nPjxnPjxwYXRoIGQ9Im02MiAzOXY0YzAgMi4yMS0xLjc5IDQtNCA0aC02LTEwLTEwLTguOTVjLTEuNzEtMi4xNC00LjIzLTMuNTgtNy4wNS0zLjkydi0zLjA4aC0uMzJjLjg1IDAgMS42Ni0uMzQgMi4yNS0uOTNsLjA3LS4wN3oiIGZpbGw9IiNjY2QxZDkiLz48L2c+PGc+PHBhdGggZD0ibTU4IDEzaC0yMC0xNi4wNS0uMDFjLS4zMyAzLjQ2LTIuNDQgNi40LTUuNCA3LjkxLjg5Ljc0IDEuNDYgMS44NSAxLjQ2IDMuMDloM2MxLjEgMCAyIC44OSAyIDIgMCAuNTUtLjIyIDEuMDUtLjU5IDEuNDEtLjM2LjM3LS44Ni41OS0xLjQxLjU5aC0zbC44NSA4LjVjLjAxLjEuMDEuMjEuMDEuMzEgMCAuODEtLjMgMS41OS0uODYgMi4xOWg0NHYtMjJjMC0yLjIxLTEuNzktNC00LTR6IiBmaWxsPSIjNjlkNmY0Ii8+PC9nPjxnPjxjaXJjbGUgY3g9IjQ4IiBjeT0iMTMiIGZpbGw9IiNlNmU5ZWQiIHI9IjEwIi8+PC9nPjxnPjxwYXRoIGQ9Im0yNyAyOWg4djZoLTh6IiBmaWxsPSIjZmNkNzcwIi8+PC9nPjxnPjxwYXRoIGQ9Im0yMS45NCAxM2MtLjMzIDMuNDYtMi40NCA2LjQtNS40IDcuOTEtLjY5LS41Ny0xLjU4LS45MS0yLjU0LS45MWgtNGMtMS4wNCAwLTIuMDIuMjYtMi44Ny43My0zLjA2LTEuNzEtNS4xMy00Ljk4LTUuMTMtOC43MyAwLTUuNTIgNC40OC0xMCAxMC0xMHMxMCA0LjQ4IDEwIDEwYzAgLjM0LS4wMi42Ny0uMDYgMXoiIGZpbGw9IiNlNmU5ZWQiLz48L2c+PGc+PHBhdGggZD0ibTEwIDM1djVjLTMuNTgtMS4xOS02LTQuNTUtNi04LjMzdi0zLjY3aDZsLS45NC45NGMtLjY4LjY4LTEuMDYgMS42LTEuMDYgMi41NnMuMzggMS44OCAxLjA2IDIuNTZ6IiBmaWxsPSIjNjU2ZDc4Ii8+PC9nPjxnPjxwYXRoIGQ9Im0xOCAyNGgtMi43NmMtLjc2IDAtMS40NS40My0xLjc5IDEuMWwtMS40NSAyLjloLTItNnYtMmMwLTIuMjcgMS4yNy00LjI1IDMuMTMtNS4yNy44NS0uNDcgMS44My0uNzMgMi44Ny0uNzNoNGMuOTYgMCAxLjg1LjM0IDIuNTQuOTEuODkuNzQgMS40NiAxLjg1IDEuNDYgMy4wOXoiIGZpbGw9IiNmZjgyNmUiLz48L2c+PGc+PHBhdGggZD0ibTIxIDI0YzEuMSAwIDIgLjg5IDIgMiAwIC41NS0uMjIgMS4wNS0uNTkgMS40MS0uMzYuMzctLjg2LjU5LTEuNDEuNTloLTMtNmwxLjQ1LTIuOWMuMzQtLjY3IDEuMDMtMS4xIDEuNzktMS4xaDIuNzZ6IiBmaWxsPSIjZmM2ZTUxIi8+PC9nPjxnPjxwYXRoIGQ9Im0zNS41NyA1M2MxLjM0IDAgMi40MyAxLjA5IDIuNDMgMi40MyAwIC4yMS0uMDMuNDEtLjU4IDEuNTYtLjIyLjI4LS41MS41LS44NS42NmwtMy43NSAxLjctMS45OC00LjQ2IDEuMTYtLjUzIDEuMzEtLjU5LjAxLS4wMSAxLjItLjU0Yy4zMi0uMTUuNjYtLjIyIDEuMDEtLjIyeiIgZmlsbD0iI2YwZDBiNCIvPjwvZz48Zz48cGF0aCBkPSJtMTAgNDB2LTVsLS45NC0uOTRjLS42OC0uNjgtMS4wNi0xLjYtMS4wNi0yLjU2cy4zOC0xLjg4IDEuMDYtMi41NmwuOTQtLjk0aDIgNmwuODUgOC41Yy4wMS4xLjAxLjIxLjAxLjMxIDAgLjgxLS4zIDEuNTktLjg2IDIuMTktLjAzLjAzLS4wNS4wNS0uMDcuMDctLjU5LjU5LTEuNC45My0yLjI1LjkzaC4zMnYzLjA4Yy0uNDItLjA1LS44NS0uMDgtMS4yOS0uMDgtMS42NyAwLTMuMjYuMzktNC42NyAxLjA4bC0uMDQtLjA4eiIgZmlsbD0iI2YwZDBiNCIvPjwvZz48L2c+PGc+PHBhdGggZD0ibTEzIDEwLjE2MiAxLjI3OSAzLjgzOGg0LjcyMXYtMmgtMy4yNzlsLTIuNzIxLTguMTYyLTMuMTg2IDkuNTU2LTEuMTk2LTIuMzk0aC0zLjYxOHYyaDIuMzgybDIuODA0IDUuNjA2eiIvPjxwYXRoIGQ9Im01OCA0OGMyLjc1NyAwIDUtMi4yNDMgNS01di0yNmMwLTIuNDMtMS43NDQtNC40NTYtNC4wNDYtNC45MDQtLjQ2Mi01LjY0My01LjE5NC0xMC4wOTYtMTAuOTU0LTEwLjA5Ni01LjcyOCAwLTEwLjQ0MiA0LjQwMi0xMC45NDkgMTBoLTE0LjA1MWMwLTYuMDY1LTQuOTM1LTExLTExLTExcy0xMSA0LjkzNS0xMSAxMWMwIDMuNDY4IDEuNjQyIDYuNzA3IDQuMzY0IDguNzctMS40NDYgMS4yODMtMi4zNjQgMy4xNDktMi4zNjQgNS4yM3YxLjk5OSAxIDIuNjc2YzAgMy45NjkgMi4zODMgNy41MDMgNiA5LjAxNHYyLjgwOGMtMy41NzUgMi4wMDctNiA1LjgzMS02IDEwLjIxNHY5LjI4OWgyMi44NTZ2LS4wMjNjMS4wMzctLjA1NCAyLjA0NC0uMjg4IDIuOTk0LS43Mmw4LjEzNi0zLjY5OGMuMzE3LS4xNDQuNjAzLS4zMzQuODU2LS41NTloNC4xNThjMS4zMDIgMCAyLjQwMi0uODM5IDIuODE2LTJoMTUuMTg0YzEuNjU0IDAgMy0xLjM0NiAzLTNzLTEuMzQ2LTMtMy0zaC02Yy0uNTUyIDAtMS0uNDQ4LTEtMXYtMXptMC0yaC0zNC41MTJjLTEuNjc3LTEuOS0zLjk0NS0zLjI1Mi02LjQ4OC0zLjc2NXYtMS40N2MuNDk5LS4xNjcuOTU5LS40MjUgMS4zNjQtLjc2NWg0Mi42MzZ2M2MwIDEuNjU0LTEuMzQ2IDMtMyAzem0tMTggNGgtMS43NjRjLTIuMDQ5IDAtMy45OTguOTUtNS4yMzYgMi40NzZ2LTQuNDc2aDh2Mi4xMDFjLS4zMjMtLjA2Ni0uNjU4LS4xMDEtMS0uMTAxem0tMTMuMTg2IDUuNjIzLS41MS0zLjU2OGMtLjIwOS0xLjQ2LS42OS0yLjgyNi0xLjM4My00LjA1NWg2LjA3OXY1Ljcyem0tMTMuMTk2LTI4LjYyNC43MjQtMS40NDdjLjE3LS4zNDEuNTEzLS41NTMuODk1LS41NTNoNS43NjNjLjU1MiAwIDEgLjQ0OSAxIDFzLS40NDggMS0xIDF6bTM0LjM4Mi0yMi45OTljNC45NjMgMCA5IDQuMDM4IDkgOXMtNC4wMzcgOS05IDktOS00LjAzOC05LTkgNC4wMzctOSA5LTl6bS0xMC45NDkgMTBjLjUwNyA1LjU5OCA1LjIyMSAxMCAxMC45NDkgMTAgNS42NzIgMCAxMC4zNTMtNC4zMTYgMTAuOTM3LTkuODM1IDEuMTk0LjM5NiAyLjA2MyAxLjUxIDIuMDYzIDIuODM1djIxaC00MS4zMjRjLjE1Mi0uNTEzLjIyNC0xLjA1My4xNjgtMS42MDJsLS43NC03LjM5OWgxLjg5NmMxLjY1NCAwIDMtMS4zNDYgMy0zcy0xLjM0Ni0zLTMtM2gtMi4xMDFjLS4xMzktLjY4LS40My0xLjMwMS0uODE1LTEuODUxIDIuNDk1LTEuNjU2IDQuMTc2LTQuMjI4IDQuNzEyLTcuMTQ4em0tMzQuMDUxLTJjMC00Ljk2MiA0LjAzNy05IDktOXM5IDQuMDM4IDkgOWMwIDMuMjA3LTEuNjg5IDYuMTA2LTQuNDIyIDcuNzI2LS43NTQtLjQ1Ny0xLjYzMy0uNzI2LTIuNTc3LS43MjZoLTQuMDAxYy0uOTk3IDAtMS45NDQuMjEzLTIuODAzLjU5LTIuNTkzLTEuNjQ1LTQuMTk3LTQuNS00LjE5Ny03LjU5em0yIDE0YzAtMi43NTcgMi4yNDMtNSA1LTVoNC4wMDFjMS4zMDQgMCAyLjQxNS44MzUgMi44MjcgMS45OTloLTEuNTkyYy0xLjE0NCAwLTIuMTcyLjYzNS0yLjY4NCAxLjY1OGwtMS4xNzEgMi4zNDJoLTYuMzgxem0wIDUuNjc1di0yLjY3NmgyLjc0MWMtLjQ3OS43NC0uNzQxIDEuNTk5LS43NDEgMi41MDEgMCAxLjIxNi40OTMgMi40MDcgMS4zNTQgMy4yNjhsLjY0Ni42NDZ2My4wNDNjLTIuNDM0LTEuMzUzLTQtMy45MjEtNC02Ljc4MnptNC43NjggMS42NzljLS40ODgtLjQ4OC0uNzY4LTEuMTY0LS43NjgtMS44NTQgMC0uNy4yNzItMS4zNTguNzY4LTEuODU0bC42NDctLjY0N2g2LjY4bC43NiA3LjZjLjA2Ni42NTMtLjE2MyAxLjI5Ni0uNjI5IDEuNzYyLS40MDYuNDA2LS45Ny42NC0xLjU0NS42NGgtMi42ODF2MmgydjEuMDEzYy0uMDk3LS4wMDMtLjE5Mi0uMDE0LS4yODktLjAxNC0xLjI5OCAwLTIuNTQzLjIyMS0zLjcxMS42MTN2LTguMDI3em0xOC4yNTQgMjcuMDgzYy0uODIxLjM3NC0xLjY5Ni41NjMtMi42LjU2My0yLjc5OCAwLTUuMjE4LTEuODAxLTYuMDIxLTQuNDhsLTEuNDQyLTQuODA3LTEuOTE2LjU3NCAxLjQ0MiA0LjgwN2MuNDcyIDEuNTc1IDEuMzg0IDIuOSAyLjU1OSAzLjkwNmgtMTUuMDQ0di03LjI4OWMwLTUuMzU1IDQuMzU2LTkuNzExIDkuNzExLTkuNzExIDQuODAxIDAgOC45MzQgMy41ODQgOS42MTIgOC4zMzhsLjU5MyA0LjE0Ny0xLjMzLjYwNS44MjggMS44MiA1LjkyMS0yLjY5MiAxLjE3MSAyLjYzNHptOC4xMzctMy42OTktMi44MzEgMS4yODctMS4xNzEtMi42MzUgMi43NzgtMS4yNjNjLjE4NC0uMDgzLjM4OC0uMTI3LjYzMS0uMTI3Ljc5IDAgMS40MzQuNjQ0IDEuNDM0IDEuNDM0IDAgLjU2LS4zMyAxLjA3Mi0uODQxIDEuMzA0em01Ljg0MS0uNzM4aC0zLjA1MmMuMDMyLS4xODYuMDUyLS4zNzQuMDUyLS41NjYgMC0xLjQ1Ny0uOTE1LTIuNjk2LTIuMjE2LTMuMTk0LjQ2Ni0uMTUxLjk1My0uMjQgMS40NTItLjI0aDEuNzY0YzEuNjU0IDAgMyAxLjM0NiAzIDMgMCAuNTUyLS40NDggMS0xIDF6bTEyLTRoNmMuNTUyIDAgMSAuNDQ4IDEgMXMtLjQ0OCAxLTEgMWgtMTUuMTAxYy0uMjQ3LTEuMjEzLS45NDYtMi4yNTMtMS44OTktMi45NzR2LTMuMDI2aDh2MWMwIDEuNjU0IDEuMzQ2IDMgMyAzeiIvPjxwYXRoIGQ9Im01NyA0MmgydjJoLTJ6Ii8+PHBhdGggZD0ibTUzIDQyaDJ2MmgtMnoiLz48cGF0aCBkPSJtNDkgNDJoMnYyaC0yeiIvPjxwYXRoIGQ9Im00MiA4aDJ2MmgtMnoiLz48cGF0aCBkPSJtNDYgOGg4djJoLTh6Ii8+PHBhdGggZD0ibTQyIDEyaDJ2MmgtMnoiLz48cGF0aCBkPSJtNDYgMTJoOHYyaC04eiIvPjxwYXRoIGQ9Im00MiAxNmgydjJoLTJ6Ii8+PHBhdGggZD0ibTQ2IDE2aDh2MmgtOHoiLz48cGF0aCBkPSJtMzYgMjhoLTEwdjhoMTB6bS0yIDZoLTZ2LTRoNnoiLz48cGF0aCBkPSJtMjYgMjRoMTB2MmgtMTB6Ii8+PHBhdGggZD0ibTI2IDIwaDEwdjJoLTEweiIvPjxwYXRoIGQ9Im0yNiAxNmgxMHYyaC0xMHoiLz48cGF0aCBkPSJtMzggMzRoMnYyaC0yeiIvPjxwYXRoIGQ9Im00MiAzNGgxN3YyaC0xN3oiLz48cGF0aCBkPSJtMzggMzBoMjF2MmgtMjF6Ii8+PHBhdGggZD0ibTM4IDI2aDIxdjJoLTIxeiIvPjwvZz48L2c+PC9zdmc+"},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0001-5e4a8d88-f3ff-432f-ac26-b5dc1e24fadf","type":"basic.constant","data":{"name":"Frequency","value":"30.0","local":true},"position":{"x":501,"y":5}},{"id":"0002-f07702a6-0709-4326-b6ac-8aa054502ca4","type":"basic.constant","data":{"name":"Kp","value":"1.0","local":true},"position":{"x":640,"y":4}},{"id":"0003-a378a01c-79b9-4818-8534-d329ad60b5c8","type":"basic.constant","data":{"name":"Ki","value":"1.0","local":true},"position":{"x":781,"y":3}},{"id":"0004-1b9f8bfc-528f-41b3-9095-f3683e1804a2","type":"basic.constant","data":{"name":"Kd","value":"1.0","local":true},"position":{"x":919,"y":2}},{"id":"05faca20-77c3-4bb6-8a6a-c827aa222af2","type":"basic.code","data":{"code":"import numpy as np\nimport math\nfrom time import sleep\nfrom utils.wires.wire_str import read_string, share_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    input_0 = read_string(input_wires[0])\n    output_0 = share_string(output_wires[0])\n\n    kp = float(parameters[1])\n    ki = float(parameters[2])\n    kd = float(parameters[3])\n    previousError, I = 0, 0\n\n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[1])\n    except IndexError:\n        enabled = True\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n    \n        while True:\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n\n                msg = input_0.get()\n                \n                if msg is not None and msg[0] is not None:\n                \n                    error = float(msg[0])\n                    sleep(0.01)\n                    \n                    # PID Control Logic\n                    \n                    P = error\n                    I = I + error\n                    D = error-previousError\n                    PIDvalue = (kp*P) + (ki*I) + (kd*D)\n                    previousError = error\n            \n                    linear_velocity = 5.0\n            \n                    angular_velocity = -PIDvalue\n                    \n                    data = []\n                    data.extend((str(linear_velocity), str(angular_velocity)))\n                    to_write = np.array(data, dtype='<U6')\n                    output_0.add(to_write)\n                    control_data[0] += 1\n                    \n            sleep(control_data[1])\n\n    except KeyboardInterrupt:\n    \n        input_0.release()\n        output_0.release()\n        enable_wire.release()","params":[{"name":"Frequency"},{"name":"Kp"},{"name":"Ki"},{"name":"Kd"}],"ports":{"in":[{"name":"Inp"},{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"900px","height":"370px"}},"position":{"x":293,"y":198}},{"id":"78796547-0b83-48fc-b719-cbf394907dc1","type":"basic.input","data":{"name":"Inp"},"position":{"x":133,"y":322}},{"id":"b4fbd756-2c48-4f10-9341-a7498ffd8807","type":"basic.input","data":{"name":"E"},"position":{"x":143,"y":469}},{"id":"2467bd46-3a99-4709-8276-b24847a76f07","type":"basic.output","data":{"name":"Out"},"position":{"x":1328,"y":385}}],"wires":[{"source":{"block":"0001-5e4a8d88-f3ff-432f-ac26-b5dc1e24fadf","port":"constant-out"},"target":{"block":"05faca20-77c3-4bb6-8a6a-c827aa222af2","port":"Frequency"}},{"source":{"block":"0002-f07702a6-0709-4326-b6ac-8aa054502ca4","port":"constant-out"},"target":{"block":"05faca20-77c3-4bb6-8a6a-c827aa222af2","port":"Kp"}},{"source":{"block":"0003-a378a01c-79b9-4818-8534-d329ad60b5c8","port":"constant-out"},"target":{"block":"05faca20-77c3-4bb6-8a6a-c827aa222af2","port":"Ki"}},{"source":{"block":"0004-1b9f8bfc-528f-41b3-9095-f3683e1804a2","port":"constant-out"},"target":{"block":"05faca20-77c3-4bb6-8a6a-c827aa222af2","port":"Kd"}},{"source":{"block":"78796547-0b83-48fc-b719-cbf394907dc1","port":"input-out"},"target":{"block":"05faca20-77c3-4bb6-8a6a-c827aa222af2","port":"Inp"}},{"source":{"block":"b4fbd756-2c48-4f10-9341-a7498ffd8807","port":"input-out"},"target":{"block":"05faca20-77c3-4bb6-8a6a-c827aa222af2","port":"E"}},{"source":{"block":"05faca20-77c3-4bb6-8a6a-c827aa222af2","port":"Out"},"target":{"block":"2467bd46-3a99-4709-8276-b24847a76f07","port":"output-in"}}]}},"dependencies":{}}