{"editor":{"id":"1c90e6ee-b6cb-4d8c-bdb1-ca3ce5a58aae","offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"2176432e-3c16-42a4-8114-d10b57bcf552","type":"diagram-links","isSvg":true,"transformed":true,"models":{"5566be24-ee80-4124-a73f-a61921ec31c6":{"id":"5566be24-ee80-4124-a73f-a61921ec31c6","type":"default","selected":false,"source":"0001-a7a358d4-30e6-46ff-bfc8-ee93c39333d9","sourcePort":"94ecdd7e-bfd9-4cb2-9b52-da396402812a","target":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","targetPort":"e2d79dc5-88fb-4667-b114-b314e4f2090c","points":[{"id":"606911a9-2eb1-49b1-9138-d7233672b29c","type":"point","x":591,"y":125.69999694824219},{"id":"06145c09-929a-4fcc-aba2-08dc03f7460d","type":"point","x":544.7374877929688,"y":199.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"9065472e-3a98-456f-8490-de2f27f0f566":{"id":"9065472e-3a98-456f-8490-de2f27f0f566","type":"default","selected":false,"source":"0002-be299f75-d9cd-4d9c-beb7-96fe151c51f6","sourcePort":"85382b2c-5899-4509-b72c-3ded4206faba","target":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","targetPort":"18f4f6bc-4f44-4491-896c-4937cc0a447d","points":[{"id":"9fbf16c6-cbd0-44e2-aa76-00f56dae7730","type":"point","x":742,"y":127.69999694824219},{"id":"05047b80-93bc-42ad-b3e7-80ab9da28f23","type":"point","x":801.1875,"y":199.5}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"1813063d-7a72-4eff-bff7-daa8436e804f":{"id":"1813063d-7a72-4eff-bff7-daa8436e804f","type":"default","selected":false,"source":"03893bef-0584-410c-a4b6-eba5bc89c582","sourcePort":"edf53709-96a7-4d52-9b60-f6dc34bdff72","target":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","targetPort":"7e24894e-36d2-4ca2-b409-6499d3f4772f","points":[{"id":"9475e701-a753-405c-a17d-cf3dc9e9eec6","type":"point","x":238.5,"y":368.6000061035156},{"id":"4b04a570-c662-4cec-860d-d2490f0cff15","type":"point","x":317.5,"y":368}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"},"610cfbaf-1996-45d4-9c4f-39fd32b53214":{"id":"610cfbaf-1996-45d4-9c4f-39fd32b53214","type":"default","selected":false,"source":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","sourcePort":"165740a7-d43f-4fbc-8085-de62b3c5ad49","target":"3d40952f-7a26-407d-a1e2-ab65173f087f","targetPort":"88bacb72-ac19-4698-be62-08dff821ab0c","points":[{"id":"88132028-3eb5-4d4e-8e46-9e82833d40dd","type":"point","x":1027.1625366210938,"y":368},{"id":"02616b8b-6cdf-4222-b013-d3d18b89ef89","type":"point","x":1125.5,"y":368.6000061035156}],"labels":[],"width":3,"color":"gray","curvyness":50,"selectedColor":"rgb(0,192,255)"}}},{"id":"54a77291-feb5-402a-a377-2b5cbb862b1c","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{"0001-a7a358d4-30e6-46ff-bfc8-ee93c39333d9":{"id":"0001-a7a358d4-30e6-46ff-bfc8-ee93c39333d9","type":"basic.constant","selected":false,"x":530,"y":10,"ports":[{"id":"94ecdd7e-bfd9-4cb2-9b52-da396402812a","type":"port.output","x":583.5,"y":118.19999694824219,"name":"constant-out","alignment":"bottom","parentNode":"0001-a7a358d4-30e6-46ff-bfc8-ee93c39333d9","links":["5566be24-ee80-4124-a73f-a61921ec31c6"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"Frequency","value":"30.0","local":true}},"0002-be299f75-d9cd-4d9c-beb7-96fe151c51f6":{"id":"0002-be299f75-d9cd-4d9c-beb7-96fe151c51f6","type":"basic.constant","selected":false,"x":681,"y":12,"ports":[{"id":"85382b2c-5899-4509-b72c-3ded4206faba","type":"port.output","x":734.5,"y":120.19999694824219,"name":"constant-out","alignment":"bottom","parentNode":"0002-be299f75-d9cd-4d9c-beb7-96fe151c51f6","links":["9065472e-3a98-456f-8490-de2f27f0f566"],"in":false,"label":"constant-out","hideLabel":true}],"data":{"name":"ROS Topic","value":"/robot/pose","local":true}},"daad12ae-847d-4cd3-b6d0-840fac1a62d9":{"id":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","type":"basic.code","selected":false,"x":309,"y":191,"ports":[{"id":"7e24894e-36d2-4ca2-b409-6499d3f4772f","type":"port.input","x":310,"y":360.5,"name":"E","alignment":"left","parentNode":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","links":["1813063d-7a72-4eff-bff7-daa8436e804f"],"in":true,"label":"E","hideLabel":false},{"id":"165740a7-d43f-4fbc-8085-de62b3c5ad49","type":"port.output","x":1019.6625366210938,"y":360.5,"name":"Out","alignment":"right","parentNode":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","links":["610cfbaf-1996-45d4-9c4f-39fd32b53214"],"in":false,"label":"Out","hideLabel":false},{"id":"e2d79dc5-88fb-4667-b114-b314e4f2090c","type":"port.parameter","x":537.2374877929688,"y":192,"name":"Frequency","alignment":"top","parentNode":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","links":["5566be24-ee80-4124-a73f-a61921ec31c6"],"in":true,"label":"Frequency","hideLabel":false},{"id":"18f4f6bc-4f44-4491-896c-4937cc0a447d","type":"port.parameter","x":793.6875,"y":192,"name":"ROSTopic","alignment":"top","parentNode":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","links":["9065472e-3a98-456f-8490-de2f27f0f566"],"in":true,"label":"ROSTopic","hideLabel":false}],"data":{"code":"#!/usr/bin/env python3\n\nimport numpy as np\nimport rospy\nfrom turtlesim.msg import Pose\nfrom time import sleep\nfrom utils.wires.wire_str import read_string, share_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\nx, y, yaw = 0.0, 0.0, 0.0\n\ndef callback(msg):\n    \n    global x, y, yaw\n    x = msg.x\n    y = msg.y\n    yaw = msg.theta\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    output_0 = share_string(output_wires[0])\n    rospy.init_node(\"odometerVC\", anonymous=True)\n    odometer_subscriber = rospy.Subscriber(parameters[1], Pose, callback)\n    \n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[0])\n    except IndexError:\n        enabled = True\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n    \n        while not rospy.is_shutdown():\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n        \n                data = []\n                data.extend((str(x), str(y), str(yaw)))\n                to_write = np.array(data, dtype='<U6')\n                output_0.add(to_write)\n                control_data[0] += 1\n                \n            sleep(control_data[1])\n\n    except KeyboardInterrupt:\n    \n        output_0.release()\n        enable_wire.release()\n","params":[{"name":"Frequency"},{"name":"ROSTopic"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"668px","height":"294px"}}},"03893bef-0584-410c-a4b6-eba5bc89c582":{"id":"03893bef-0584-410c-a4b6-eba5bc89c582","type":"basic.input","selected":false,"x":145,"y":342,"ports":[{"id":"edf53709-96a7-4d52-9b60-f6dc34bdff72","type":"port.output","x":231,"y":361.1000061035156,"name":"input-out","alignment":"right","parentNode":"03893bef-0584-410c-a4b6-eba5bc89c582","links":["1813063d-7a72-4eff-bff7-daa8436e804f"],"in":false,"label":"input-out","hideLabel":true}],"data":{"name":"E"}},"3d40952f-7a26-407d-a1e2-ab65173f087f":{"id":"3d40952f-7a26-407d-a1e2-ab65173f087f","type":"basic.output","selected":false,"x":1117,"y":342,"ports":[{"id":"88bacb72-ac19-4698-be62-08dff821ab0c","type":"port.input","x":1118,"y":361.1000061035156,"name":"output-in","alignment":"left","parentNode":"3d40952f-7a26-407d-a1e2-ab65173f087f","links":["610cfbaf-1996-45d4-9c4f-39fd32b53214"],"in":true,"label":"output-in","hideLabel":true}],"data":{"name":"Out"}}}}]},"version":"3.0","package":{"name":"Odometer","version":"1.0.0","description":"Gets Robot's Position.","author":"Muhammad Taha Suhail","image":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzY4IDM2OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzY4IDM2ODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggc3R5bGU9ImZpbGw6I0NDRTRGRjsiIGQ9Ik0xODQsOGM5Ny4yLDAsMTc2LDc4LjgsMTc2LDE3NnMtNzguOCwxNzYtMTc2LDE3NlM4LDI4MS4yLDgsMTg0Uzg2LjgsOCwxODQsOHogTTI5NC44OCwyNDgNCgljMTAuODgtMTguOCwxNy4xMi00MC42NCwxNy4xMi02NGMwLTcwLjcyLTU3LjI4LTEyOC0xMjgtMTI4UzU2LDExMy4yOCw1NiwxODRjMCwyMy4zNiw2LjI0LDQ1LjIsMTcuMTIsNjQNCgljMjIuMDgsMzguMjQsNjMuNTIsNjQsMTEwLjg4LDY0UzI3Mi44LDI4Ni4yNCwyOTQuODgsMjQ4eiIvPg0KPGc+DQoJPHBhdGggc3R5bGU9ImZpbGw6IzAwN0FGRjsiIGQ9Ik0xODQsMEM4Mi41NDQsMCwwLDgyLjU0NCwwLDE4NHM4Mi41NDQsMTg0LDE4NCwxODRzMTg0LTgyLjU0NCwxODQtMTg0UzI4NS40NTYsMCwxODQsMHogTTE4NCwzNTINCgkJYy05Mi42NCwwLTE2OC03NS4zNi0xNjgtMTY4UzkxLjM2LDE2LDE4NCwxNnMxNjgsNzUuMzYsMTY4LDE2OFMyNzYuNjQsMzUyLDE4NCwzNTJ6Ii8+DQoJPHBhdGggc3R5bGU9ImZpbGw6IzAwN0FGRjsiIGQ9Ik0yODAuMTM2LDg3Ljg2NGMtMC4wMzItMC4wMzItMC4wOC0wLjA0LTAuMTEyLTAuMDcyQzI1NS40MDgsNjMuMjE2LDIyMS40NDgsNDgsMTg0LDQ4DQoJCXMtNzEuNDA4LDE1LjIxNi05Ni4wMjQsMzkuNzg0Yy0wLjAzMiwwLjAzMi0wLjA4LDAuMDQtMC4xMTIsMC4wNzJzLTAuMDQsMC4wOC0wLjA3MiwwLjExMkM2My4yMTYsMTEyLjU5Miw0OCwxNDYuNTUyLDQ4LDE4NA0KCQljMCwyMy45Miw2LjI4OCw0Ny40MjQsMTguMTg0LDY3Ljk4NGMwLDAuMDA4LDAsMC4wMTYsMC4wMDgsMC4wMTZjMjQuMjE2LDQxLjk0NCw2OS4zNiw2OCwxMTcuODA4LDY4czkzLjU5Mi0yNi4wNTYsMTE3LjgwOC02OA0KCQljMC0wLjAwOCwwLTAuMDE2LDAuMDA4LTAuMDE2QzMxMy43MTIsMjMxLjQyNCwzMjAsMjA3LjkyLDMyMCwxODRjMC0zNy40NDgtMTUuMjE2LTcxLjQwOC0zOS43ODQtOTYuMDI0DQoJCUMyODAuMTc2LDg3Ljk0NCwyODAuMTY4LDg3Ljg5NiwyODAuMTM2LDg3Ljg2NHogTTI2NCwxOTJoMzkuNTEyYy0xLjEyLDE2Ljc5Mi01LjUyOCwzMy4xOTItMTMuMzUyLDQ4SDc3LjgzMg0KCQljLTcuODI0LTE0LjgwOC0xMi4yMzItMzEuMjA4LTEzLjM1Mi00OEgxMDRjNC40MTYsMCw4LTMuNTg0LDgtOHMtMy41ODQtOC04LThINjQuNDA4YzEuOC0yNy4wNjQsMTIuNTUyLTUxLjY1NiwyOS4zOTItNzAuODg4DQoJCWwyNy45ODQsMjcuOTg0YzEuNTYsMS41NiwzLjYwOCwyLjM0NCw1LjY1NiwyLjM0NHM0LjA5Ni0wLjc4NCw1LjY1Ni0yLjM0NGMzLjEyOC0zLjEyOCwzLjEyOC04LjE4NCwwLTExLjMxMkwxMDUuMTEyLDkzLjgNCgkJQzEyNC4zNDQsNzYuOTYsMTQ4LjkzNiw2Ni4yLDE3Niw2NC40MDhWMTA0YzAsNC40MTYsMy41ODQsOCw4LDhzOC0zLjU4NCw4LThWNjQuNDA4YzI3LjA2NCwxLjgsNTEuNjU2LDEyLjU1Miw3MC44ODgsMjkuMzkyDQoJCWwtNjguNiw2OC42Yy0zLjE2OC0xLjUyLTYuNjQtMi40LTEwLjI4OC0yLjRjLTEzLjIzMiwwLTI0LDEwLjc2OC0yNCwyNHMxMC43NjgsMjQsMjQsMjRzMjQtMTAuNzY4LDI0LTI0DQoJCWMwLTMuNjY0LTAuODg4LTcuMTQ0LTIuMzkyLTEwLjI5Nmw2OC41OTItNjguNTkyYzE2Ljg0LDE5LjIzMiwyNy42LDQzLjgyNCwyOS4zOTIsNzAuODg4SDI2NGMtNC40MTYsMC04LDMuNTg0LTgsOA0KCQlDMjU2LDE4OC40MTYsMjU5LjU4NCwxOTIsMjY0LDE5MnogTTE3OC4wODgsMTg5LjI3MmMtMC41OTItMC42NjQtMS4xMi0xLjM3Ni0xLjQ2NC0yLjIwOA0KCQlDMTc2Ljk1MiwxODcuODY0LDE3Ny40OCwxODguNTkyLDE3OC4wODgsMTg5LjI3MnogTTE3Ni42MTYsMTgwLjkzNmMwLjM0NC0wLjgzMiwwLjg4LTEuNTQ0LDEuNDY0LTIuMjA4DQoJCUMxNzcuNDgsMTc5LjQwOCwxNzYuOTUyLDE4MC4xMzYsMTc2LjYxNiwxODAuOTM2eiBNMTgwLjkzNiwxOTEuMzg0Yy0wLjgzMi0wLjM0NC0xLjU0NC0wLjg4LTIuMjA4LTEuNDY0DQoJCUMxNzkuNDA4LDE5MC41MiwxODAuMTM2LDE5MS4wNDgsMTgwLjkzNiwxOTEuMzg0eiBNMTg5LjI3MiwxODkuOTEyYy0wLjY2NCwwLjU5Mi0xLjM3NiwxLjEyLTIuMjA4LDEuNDY0DQoJCUMxODcuODY0LDE5MS4wNDgsMTg4LjU5MiwxOTAuNTIsMTg5LjI3MiwxODkuOTEyeiBNMTg0LDMwNGMtMzcuOTA0LDAtNzMuNDg4LTE4LjEwNC05NS45NjgtNDhoMTkxLjkzNg0KCQlDMjU3LjQ4OCwyODUuODk2LDIyMS45MDQsMzA0LDE4NCwzMDR6Ii8+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg=="},"design":{"board":"Python3-Noetic","graph":{"blocks":[{"id":"0001-a7a358d4-30e6-46ff-bfc8-ee93c39333d9","type":"basic.constant","data":{"name":"Frequency","value":"30.0","local":true},"position":{"x":530,"y":10}},{"id":"0002-be299f75-d9cd-4d9c-beb7-96fe151c51f6","type":"basic.constant","data":{"name":"ROS Topic","value":"/robot/pose","local":true},"position":{"x":681,"y":12}},{"id":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","type":"basic.code","data":{"code":"#!/usr/bin/env python3\n\nimport numpy as np\nimport rospy\nfrom turtlesim.msg import Pose\nfrom time import sleep\nfrom utils.wires.wire_str import read_string, share_string\nfrom utils.tools.freq_monitor import monitor_frequency\n\nx, y, yaw = 0.0, 0.0, 0.0\n\ndef callback(msg):\n    \n    global x, y, yaw\n    x = msg.x\n    y = msg.y\n    yaw = msg.theta\n\ndef loop(block_name, input_wires, output_wires, parameters, flags):\n\n    output_0 = share_string(output_wires[0])\n    rospy.init_node(\"odometerVC\", anonymous=True)\n    odometer_subscriber = rospy.Subscriber(parameters[1], Pose, callback)\n    \n    enabled = False\n    try:\n        enable_wire = read_string(input_wires[0])\n    except IndexError:\n        enabled = True\n\n    required_frequency, update = float(parameters[0]), 1\n    control_data = np.array([0.0,0.03])\n\n    if flags[0] == 1:\n        monitor_frequency(block_name, control_data, required_frequency, update)\n\n    try:\n    \n        while not rospy.is_shutdown():\n        \n            if enabled or (update := bool(enable_wire.get()[0])):\n        \n                data = []\n                data.extend((str(x), str(y), str(yaw)))\n                to_write = np.array(data, dtype='<U6')\n                output_0.add(to_write)\n                control_data[0] += 1\n                \n            sleep(control_data[1])\n\n    except KeyboardInterrupt:\n    \n        output_0.release()\n        enable_wire.release()\n","params":[{"name":"Frequency"},{"name":"ROSTopic"}],"ports":{"in":[{"name":"E"}],"out":[{"name":"Out"}]},"size":{"width":"668px","height":"294px"}},"position":{"x":309,"y":191}},{"id":"03893bef-0584-410c-a4b6-eba5bc89c582","type":"basic.input","data":{"name":"E"},"position":{"x":145,"y":342}},{"id":"3d40952f-7a26-407d-a1e2-ab65173f087f","type":"basic.output","data":{"name":"Out"},"position":{"x":1117,"y":342}}],"wires":[{"source":{"block":"0001-a7a358d4-30e6-46ff-bfc8-ee93c39333d9","port":"constant-out"},"target":{"block":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","port":"Frequency"}},{"source":{"block":"0002-be299f75-d9cd-4d9c-beb7-96fe151c51f6","port":"constant-out"},"target":{"block":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","port":"ROSTopic"}},{"source":{"block":"03893bef-0584-410c-a4b6-eba5bc89c582","port":"input-out"},"target":{"block":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","port":"E"}},{"source":{"block":"daad12ae-847d-4cd3-b6d0-840fac1a62d9","port":"Out"},"target":{"block":"3d40952f-7a26-407d-a1e2-ab65173f087f","port":"output-in"}}]}},"dependencies":{}}